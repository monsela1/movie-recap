<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ·ûü·ûò·üí·ûö·û∂·ûô·ûö·ûø·ûÑ - Movie Recap</title>
    
    <!-- ·ûë·û∂·ûâ·ûô·ûÄ React ·ûì·û∑·ûÑ Tailwind ·ûñ·û∏·û¢·üä·û∏·ûì·ûí·û∫·ûé·û∑·ûè (CDN) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font ·ûÅ·üí·ûò·üÇ·ûö -->
    <link href="https://fonts.googleapis.com/css2?family=Battambang:wght@400;700&family=Kantumruy+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Kantumruy Pro', sans-serif; }
        .font-khmer { font-family: 'Kantumruy Pro', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS (·ûá·üÜ·ûì·ûΩ·ûü Lucide ·ûä·üÑ·ûô SVG ·ûä·ûæ·ûò·üí·ûî·û∏·û¢·üÑ·ûô·ûÑ·û∂·ûô·ûü·üí·ûö·ûΩ·ûõ Copy) ---
        const Icons = {
            Zap: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
            Upload: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>,
            Play: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>,
            Pause: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>,
            Globe: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>,
            FileText: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>,
            CheckCircle: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>,
            Loader2: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className="animate-spin"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>,
            Layers: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></svg>,
            Volume2: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>,
            Download: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>,
            RefreshCw: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>
        };

        // --- MAIN APP COMPONENT ---
        function App() {
            const [step, setStep] = useState('upload'); 
            const [progress, setProgress] = useState(0);
            const [processingStatus, setProcessingStatus] = useState('');
            const [videoUrl, setVideoUrl] = useState('');
            const [selectedStyle, setSelectedStyle] = useState('recap');
            const [isPlaying, setIsPlaying] = useState(false);
            const [currentTime, setCurrentTime] = useState(0);
            
            // ·ûë·û∑·ûì·üí·ûì·ûì·üê·ûô·ûÇ·üÜ·ûö·ûº
            const demoScript = [
                { time: '00:00', zh: 'Â§ßÂÆ∂ÁúãÔºåËøô‰∏™Áî∑‰∫∫Âè´Â∞èÂ∏Ö„ÄÇ', km: '·ûò·ûæ·ûõ·ûì·üé! ·ûî·ûª·ûö·ûü·ûò·üí·ûì·û∂·ûÄ·üã·ûì·üÅ·üá·ûà·üí·ûò·üÑ·üá·û¢·û∂·ûü·üí·ûú·û∑·ûè·üî' },
                { time: '00:05', zh: '‰ªñËôΩÁÑ∂ÂæàÁ©∑Ôºå‰ΩÜÊòØÈùûÂ∏∏Âä™Âäõ„ÄÇ', km: '·ûë·üÑ·üá·ûî·û∏·ûá·û∂·ûÇ·û∂·ûè·üã·ûÄ·üí·ûö ·ûî·üâ·ûª·ûì·üí·ûè·üÇ·ûÇ·û∂·ûè·üã·ûá·û∂·ûò·ûì·ûª·ûü·üí·ûü·ûÅ·û∑·ûè·ûÅ·üÜ·ûî·üí·ûö·ûπ·ûÑ·ûî·üí·ûö·üÇ·ûÑ·ûé·û∂·ûü·üã·üî' },
                { time: '00:10', zh: 'Êúâ‰∏ÄÂ§©Ôºå‰ªñÂú®Ë∑Ø‰∏äÊç°Âà∞‰∫Ü‰∏Ä‰∏™Á•ûÁßòÁöÑÁõíÂ≠ê„ÄÇ', km: '·ûê·üí·ûÑ·üÉ·ûò·ûΩ·ûô ·ûì·üÖ·ûè·û∂·ûò·ûï·üí·ûõ·ûº·ûú·ûè·üí·ûö·ûõ·ûî·üã·ûò·ûÄ·ûï·üí·ûë·üá ·ûÇ·û∂·ûè·üã·ûî·û∂·ûì·ûö·ûæ·ûü·ûî·üí·ûö·û¢·ûî·üã·û¢·û∂·ûê·üå·ûÄ·üÜ·ûî·û∂·üÜ·ûÑ·ûò·ûΩ·ûô·üî' },
                { time: '00:15', zh: 'ÊâìÂºÄ‰∏ÄÁúãÔºåÈáåÈù¢Á´üÁÑ∂ÊòØ‰∏ÄÂº†ËóèÂÆùÂõæÔºÅ', km: '·ûñ·üÅ·ûõ·ûî·ûæ·ûÄ·ûò·ûæ·ûõ ·ûü·üí·ûö·û∂·ûî·üã·ûè·üÇ·ûÉ·ûæ·ûâ·ûï·üÇ·ûì·ûë·û∏·ûÄ·üÜ·ûé·ûî·üã·ûò·ûΩ·ûô·ûì·üÖ·ûÄ·üí·ûì·ûª·ûÑ·ûì·üÑ·üá!' },
                { time: '00:20', zh: '‰ªéÊ≠§Ôºå‰ªñÁöÑ‰∫∫ÁîüÂèëÁîü‰∫ÜÁøªÂ§©Ë¶ÜÂú∞ÁöÑÂèòÂåñ„ÄÇ', km: '·ûÖ·û∂·ûî·üã·ûè·û∂·üÜ·ûÑ·ûñ·û∏·ûñ·üÅ·ûõ·ûì·üÑ·üá·ûò·ûÄ ·ûá·û∏·ûú·û∑·ûè·ûö·ûî·ûü·üã·ûÇ·û∂·ûè·üã·ûÄ·üè·ûî·û∂·ûì·ûï·üí·ûõ·û∂·ûü·üã·ûî·üí·ûè·ûº·ûö·ûë·û∂·üÜ·ûÑ·ûü·üí·ûö·ûª·ûÑ·üî' },
                { time: '00:25', zh: '‰ªñÂÜ≥ÂÆöË∏è‰∏äÂØªÂÆùÁöÑÊóÖÁ®ã„ÄÇ', km: '·ûÇ·û∂·ûè·üã·ûÄ·üè·ûü·ûò·üí·ûö·üÅ·ûÖ·ûÖ·û∑·ûè·üí·ûè·ûÖ·üÅ·ûâ·ûä·üÜ·ûé·ûæ·ûö·ûü·üí·ûú·üÇ·ûÑ·ûö·ûÄ·ûÄ·üÜ·ûé·ûî·üã·ûó·üí·ûõ·û∂·ûò·üó·üî' }
            ];

            const handleProcess = () => {
                if (!videoUrl) return;
                setStep('processing');
                setProgress(0);
                
                const stages = [
                    { msg: '·ûÄ·üÜ·ûñ·ûª·ûÑ·ûó·üí·ûá·û∂·ûî·üã·ûë·üÖ·ûÄ·û∂·ûì·üã Server ·ûÖ·û∑·ûì...', dur: 1500 },
                    { msg: '·ûÄ·üÜ·ûñ·ûª·ûÑ·ûë·û∂·ûâ·ûô·ûÄ·ûú·û∏·ûä·üÅ·û¢·ûº (No Watermark)...', dur: 2000 },
                    { msg: 'AI ·ûÄ·üÜ·ûñ·ûª·ûÑ·ûü·üí·ûè·û∂·ûî·üã·ûó·û∂·ûü·û∂·ûÖ·û∑·ûì (Whisper)...', dur: 2000 },
                    { msg: 'GPT-4 ·ûÄ·üÜ·ûñ·ûª·ûÑ·ûî·ûÄ·ûî·üí·ûö·üÇ·ûá·û∂·ûó·û∂·ûü·û∂·ûÅ·üí·ûò·üÇ·ûö...', dur: 2000 },
                    { msg: '·ûÄ·üÜ·ûñ·ûª·ûÑ·ûî·ûÑ·üí·ûÄ·ûæ·ûè·ûü·üÜ·û°·üÅ·ûÑ·ûì·û∑·ûô·û∂·ûô (TTS Khmer)...', dur: 2000 },
                    { msg: '·ûÄ·üÜ·ûñ·ûª·ûÑ·ûÄ·û∂·ûè·üã·ûè·ûú·û∏·ûä·üÅ·û¢·ûº·ûî·ûâ·üí·ûÖ·ûº·ûõ·ûÇ·üí·ûì·û∂ (Rendering)...', dur: 1500 }
                ];

                let accumulatedTime = 0;
                stages.forEach((stage, index) => {
                    setTimeout(() => {
                        setProcessingStatus(stage.msg);
                        const percent = ((index + 1) / stages.length) * 100;
                        setProgress(percent);
                        if (index === stages.length - 1) {
                            setTimeout(() => {
                                setStep('result');
                                setIsPlaying(true);
                            }, 1000);
                        }
                    }, accumulatedTime);
                    accumulatedTime += stage.dur;
                });
            };

            const handleReset = () => {
                setStep('upload');
                setVideoUrl('');
                setProgress(0);
                setIsPlaying(false);
                setCurrentTime(0);
            };

            useEffect(() => {
                let interval;
                if (isPlaying) {
                    interval = setInterval(() => {
                        setCurrentTime((prev) => (prev < 30 ? prev + 1 : 0));
                    }, 1000);
                }
                return () => clearInterval(interval);
            }, [isPlaying]);

            return (
                <div className="min-h-screen pb-10">
                    {/* Header */}
                    <header className="bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm">
                        <div className="container mx-auto px-4 h-16 flex items-center justify-between">
                            <div className="flex items-center space-x-2">
                                <div className="bg-blue-600 p-2 rounded-lg text-white">
                                    <Icons.Zap />
                                </div>
                                <h1 className="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600">
                                    AI ·ûü·ûò·üí·ûö·û∂·ûô·ûö·ûø·ûÑ
                                </h1>
                            </div>
                            <button className="bg-gray-900 text-white px-3 py-1.5 rounded-lg text-sm font-medium">·ûÖ·ûº·ûõ·ûÇ·ûé·ûì·û∏</button>
                        </div>
                    </header>

                    <main className="container mx-auto p-4 md:p-8 max-w-4xl">
                        
                        {/* VIEW 1: UPLOAD */}
                        {step === 'upload' && (
                            <div className="text-center py-6 animate-fade-in">
                                <h2 className="text-2xl md:text-4xl font-bold text-gray-900 mb-4">
                                    ·ûî·ûÄ·ûî·üí·ûö·üÇ·ûú·û∏·ûä·üÅ·û¢·ûº·ûÖ·û∑·ûì ·ûë·üÖ·ûá·û∂·ûÅ·üí·ûò·üÇ·ûö
                                </h2>
                                <p className="text-gray-500 mb-8">·ûä·û∂·ûÄ·üã Link ·ûñ·û∏ Douyin ·û¨ TikTok ·ûä·ûæ·ûò·üí·ûî·û∏·û¢·üÑ·ûô AI ·ûü·ûò·üí·ûö·û∂·ûô·ûö·ûø·ûÑ</p>

                                <div className="bg-white rounded-2xl shadow-lg border border-gray-100 p-6 text-left">
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Video URL</label>
                                    <div className="relative mb-6">
                                        <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400">
                                            <Icons.Globe />
                                        </div>
                                        <input
                                            type="text"
                                            className="block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none bg-gray-50"
                                            placeholder="https://v.douyin.com/..."
                                            value={videoUrl}
                                            onChange={(e) => setVideoUrl(e.target.value)}
                                        />
                                    </div>

                                    <div className="grid grid-cols-2 gap-4 mb-6">
                                        <button onClick={() => setSelectedStyle('recap')} className={`p-4 border rounded-xl flex flex-col items-center ${selectedStyle === 'recap' ? 'border-blue-500 bg-blue-50 text-blue-700' : 'hover:bg-gray-50'}`}>
                                            <Icons.Layers />
                                            <span className="font-bold mt-2">·ûü·ûò·üí·ûö·û∂·ûô·ûö·ûø·ûÑ</span>
                                        </button>
                                        <button onClick={() => setSelectedStyle('dubbing')} className={`p-4 border rounded-xl flex flex-col items-center ${selectedStyle === 'dubbing' ? 'border-blue-500 bg-blue-50 text-blue-700' : 'hover:bg-gray-50'}`}>
                                            <Icons.Volume2 />
                                            <span className="font-bold mt-2">·ûî·ûÄ·ûî·üí·ûö·üÇ·ûï·üí·ûë·û∂·ûõ·üã</span>
                                        </button>
                                    </div>

                                    <button
                                        onClick={handleProcess}
                                        disabled={!videoUrl}
                                        className={`w-full py-4 rounded-xl text-white font-bold text-lg transition ${!videoUrl ? 'bg-gray-300' : 'bg-gradient-to-r from-blue-600 to-indigo-600 shadow-lg'}`}
                                    >
                                        ·ûÖ·û∂·ûî·üã·ûï·üí·ûè·ûæ·ûò·ûä·üÜ·ûé·ûæ·ûö·ûÄ·û∂·ûö AI üöÄ
                                    </button>
                                    
                                    <div className="mt-4 text-center">
                                       <button onClick={() => setVideoUrl('https://v.douyin.com/demo123')} className="text-blue-500 text-sm">·ûÖ·ûª·ûÖ·ûë·û∏·ûì·üÅ·üá·ûä·ûæ·ûò·üí·ûî·û∏·ûü·û∂·ûÄ·ûõ·üí·ûî·ûÑ (Demo)</button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* VIEW 2: PROCESSING */}
                        {step === 'processing' && (
                            <div className="flex flex-col items-center justify-center pt-10">
                                <div className="relative w-24 h-24 mb-6 text-blue-600">
                                    <Icons.Loader2 />
                                    <div className="absolute inset-0 flex items-center justify-center font-bold text-gray-700">{Math.round(progress)}%</div>
                                </div>
                                <h2 className="text-xl font-bold mb-2">AI ·ûÄ·üÜ·ûñ·ûª·ûÑ·ûí·üí·ûú·ûæ·ûÄ·û∂·ûö...</h2>
                                <p className="text-blue-600 animate-pulse mb-6">{processingStatus}</p>
                                <div className="w-full max-w-md bg-gray-200 rounded-full h-2">
                                    <div className="bg-blue-600 h-2 rounded-full transition-all duration-500" style={{ width: `${progress}%` }}></div>
                                </div>
                            </div>
                        )}

                        {/* VIEW 3: RESULT */}
                        {step === 'result' && (
                            <div className="space-y-6">
                                {/* Video Player */}
                                <div className="bg-black rounded-2xl overflow-hidden shadow-2xl relative aspect-video group">
                                    <div className="absolute inset-0 flex items-center justify-center bg-gray-800">
                                        <div className="text-white opacity-20 text-6xl font-bold">VIDEO</div>
                                        {!isPlaying && (
                                            <div className="absolute z-10 bg-white/20 p-4 rounded-full cursor-pointer backdrop-blur-sm" onClick={() => setIsPlaying(true)}>
                                                <div className="text-white"><Icons.Play /></div>
                                            </div>
                                        )}
                                    </div>
                                    
                                    {/* Subtitle Overlay */}
                                    {isPlaying && (
                                        <div className="absolute bottom-16 w-full text-center px-4">
                                            <span className="inline-block bg-black/70 text-yellow-300 px-3 py-2 rounded-lg text-lg backdrop-blur-md shadow-sm">
                                                {demoScript[Math.floor((currentTime / 30) * demoScript.length)]?.km || "..."}
                                            </span>
                                        </div>
                                    )}

                                    {/* Controls */}
                                    <div className="absolute bottom-0 w-full bg-gradient-to-t from-black/80 to-transparent p-4 text-white flex justify-between items-center">
                                        <button onClick={() => setIsPlaying(!isPlaying)}>
                                            {isPlaying ? <Icons.Pause /> : <Icons.Play />}
                                        </button>
                                        <span className="text-sm font-mono">00:{currentTime < 10 ? '0'+currentTime : currentTime} / 00:30</span>
                                    </div>
                                </div>

                                <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex justify-between items-center">
                                    <div className="font-bold text-gray-700">·ûõ·ûë·üí·ûí·ûï·ûõ·ûü·ûò·üí·ûö·û∂·ûô</div>
                                    <button className="bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 text-sm">
                                        <Icons.Download /> <span>Save MP4</span>
                                    </button>
                                </div>

                                {/* Script Box */}
                                <div className="bg-white rounded-2xl shadow border border-gray-100 overflow-hidden">
                                    <div className="p-4 bg-gray-50 border-b border-gray-100 flex items-center">
                                        <div className="text-blue-500 mr-2"><Icons.FileText /></div>
                                        <h3 className="font-bold text-gray-700">Script (·û¢·ûè·üí·ûê·ûî·ûë)</h3>
                                    </div>
                                    <div className="p-4 space-y-3 max-h-60 overflow-y-auto">
                                        {demoScript.map((line, idx) => (
                                            <div key={idx} className={`p-2 rounded ${Math.floor((currentTime / 30) * demoScript.length) === idx ? 'bg-blue-50 border border-blue-100' : ''}`}>
                                                <div className="text-xs text-gray-400">{line.time}</div>
                                                <div className="text-gray-400 text-xs">{line.zh}</div>
                                                <div className="text-gray-800 font-medium">{line.km}</div>
                                            </div>
                                        ))}
                                    </div>
                                    <div className="p-4 border-t border-gray-100">
                                        <button onClick={handleReset} className="w-full py-2 border border-gray-300 rounded-lg text-gray-600 flex justify-center items-center hover:bg-gray-50">
                                            <span className="mr-2"><Icons.RefreshCw /></span> ·ûí·üí·ûú·ûæ·ûú·û∏·ûä·üÅ·û¢·ûº·ûê·üí·ûò·û∏
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
